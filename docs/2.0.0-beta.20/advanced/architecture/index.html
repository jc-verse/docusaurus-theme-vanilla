<!doctype html>
<html lang="en" dir="ltr" class="plugin-docs plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/docusaurus-theme-vanilla/blog/rss.xml" title="docusaurus-theme-vanilla RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurus-theme-vanilla/blog/atom.xml" title="docusaurus-theme-vanilla Atom Feed">
<link rel="alternate" type="application/json" href="/docusaurus-theme-vanilla/blog/feed.json" title="docusaurus-theme-vanilla JSON Feed">



<link rel="stylesheet" href="/docusaurus-theme-vanilla/katex/katex.min.css"><title data-rh="true">docusaurus-theme-vanilla</title><meta data-rh="true" property="og:title" content="docusaurus-theme-vanilla"><link data-rh="true" rel="icon" href="/docusaurus-theme-vanilla/img/favicon.ico"><link rel="stylesheet" href="/docusaurus-theme-vanilla/assets/css/styles.f5383ab8.css">
<link rel="preload" href="/docusaurus-theme-vanilla/assets/js/runtime~main.3dcb6db2.js" as="script">
<link rel="preload" href="/docusaurus-theme-vanilla/assets/js/main.1fe140ab.js" as="script">
</head>
<body>
<div id="__docusaurus">
<div class="docMain_nU3O"><div class="docSidebar_u_TH"><ul class="docSidebarContent_Escx"><li><a href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/">Introduction</a></li><li class="category__0js"><details open=""><summary><a aria-expanded="true" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/category/getting-started">Getting Started</a></summary><ul><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/installation">Installation</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/configuration">Configuration</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/playground">Playground</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/typescript-support">TypeScript Support</a></li></ul></details></li><li class="category__0js"><details><summary><a aria-expanded="false" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/category/guides">Guides</a></summary><ul><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/creating-pages">Pages</a></li><li class="category__0js"><details><summary><a aria-expanded="false" tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/docs-introduction">Docs</a></summary><ul><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/create-doc">Create a doc</a></li><li class="category__0js"><details><summary><a aria-expanded="false" tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/sidebar">Sidebar</a></summary><ul><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/sidebar/items">Sidebar items</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/sidebar/autogenerated">Autogenerated</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/sidebar/multiple-sidebars">Using multiple sidebars</a></li></ul></details></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/versioning">Versioning</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/docs-multi-instance">Docs Multi-instance</a></li></ul></details></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/blog">Blog</a></li><li class="category__0js"><details><summary><a aria-expanded="false" tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features">Markdown Features</a></summary><ul><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/react">MDX and React</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/tabs">Tabs</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/code-blocks">Code blocks</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/admonitions">Admonitions</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/toc">Headings and Table of contents</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/assets">Assets</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/links">Markdown links</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/plugins">MDX Plugins</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/math-equations">Math Equations</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/markdown-features/head-metadata">Head Metadata</a></li></ul></details></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/styling-layout">Styling and Layout</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/swizzling">Swizzling</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/static-assets">Static Assets</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/search">Search</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/browser-support">Browser support</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/seo">SEO</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/using-plugins">Using Plugins</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/deployment">Deployment</a></li><li class="category__0js"><details><summary><a aria-expanded="false" tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/i18n/introduction">Internationalization</a></summary><ul><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/i18n/tutorial">Tutorial</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/i18n/git">Using Git</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/i18n/crowdin">Using Crowdin</a></li></ul></details></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/guides/whats-next">What&#x27;s next?</a></li></ul></details></li><li class="category__0js"><details open=""><summary><a aria-expanded="true" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/">Advanced Guides</a></summary><ul><li><a aria-current="page" tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/architecture">Architecture</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/plugins">Plugins</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/routing">Routing</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/ssg">Static site generation</a></li><li><a tabindex="0" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/client">Client architecture</a></li></ul></details></li><li class="category__0js"><details><summary><a aria-expanded="false" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/migration">Migrating from v1 to v2</a></summary><ul><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/migration">Migration overview</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/migration/automated">Automated migration</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/migration/manual">Manual migration</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/migration/versioned-sites">Versioned sites</a></li><li><a tabindex="-1" href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/migration/translated-sites">Translated sites</a></li></ul></details></li></ul></div><main class="docContent_Plr0"><h1>Architecture</h1><div data-rmiz-wrap="visible"><p><img alt="Architecture overview" src="/docusaurus-theme-vanilla/assets/images/architecture-5b7220912f5cfdff40a7728233abb902.png" width="2228" height="2007"></p><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><p>This diagram shows how Docusaurus works to build your app. Plugins each collect their content and emit JSON data; themes provide layout components which receive the JSON data as route modules. The bundler bundles all the components and emits a server bundle and a client bundle.</p><p>Although you (either plugin authors or site creators) are writing JavaScript all the time, bear in mind that the JS is actually run in different environments:</p><ul><li>All plugin lifecycle methods are run in Node. Therefore, until we support ES Modules in our codebase, plugin source code must be provided as CommonJS that can be <code>require</code>&#x27;d.</li><li>The theme code is built with Webpack. They can be provided as ESMâ€”following React conventions.</li></ul><p>Plugin code and theme code never directly import each other: they only communicate through protocols (in our case, through JSON temp files and calls to <code>addRoute</code>). A useful mental model is to imagine that the plugins are not written in JavaScript, but in another language like Rust. The only way to interact with plugins for the user is through <code>docusaurus.config.js</code>, which itself is run in Node (hence you can use <code>require</code> and pass callbacks as plugin options).</p><p>During bundling, the config file itself is serialized and bundled, allowing the theme to access config options like <code>themeConfig</code> or <code>baseUrl</code> through <a href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/docusaurus-core#useDocusaurusContext"><code>useDocusaurusContext()</code></a>. However, the <code>siteConfig</code> object only contains <strong>serializable values</strong> (values that are preserved after <code>JSON.stringify()</code>). Functions, regexes, etc. would be lost on the client side. The <code>themeConfig</code> is designed to be entirely serializable.</p><nav class="pagination_m5Fq"><span class="prevLink_bZi_"><a href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/">Previous doc: <!-- -->Advanced Tutorials</a></span><span class="nextLink_cubj"><a href="/docusaurus-theme-vanilla/docs/2.0.0-beta.20/advanced/plugins">Next doc: <!-- -->Plugins</a></span></nav></main><aside class="docTOC_UKS8"><nav class="docTOCContent_a55M"></nav></aside></div></div>
<script src="/docusaurus-theme-vanilla/assets/js/runtime~main.3dcb6db2.js"></script>
<script src="/docusaurus-theme-vanilla/assets/js/main.1fe140ab.js"></script>
</body>
</html>