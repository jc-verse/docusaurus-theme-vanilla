<!doctype html>
<html lang="en" dir="ltr" class="plugin-docs plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/docusaurus-theme-vanilla/blog/rss.xml" title="docusaurus-theme-vanilla RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurus-theme-vanilla/blog/atom.xml" title="docusaurus-theme-vanilla Atom Feed">
<link rel="alternate" type="application/json" href="/docusaurus-theme-vanilla/blog/feed.json" title="docusaurus-theme-vanilla JSON Feed">



<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">docusaurus-theme-vanilla</title><meta data-rh="true" property="og:title" content="docusaurus-theme-vanilla"><link data-rh="true" rel="icon" href="/docusaurus-theme-vanilla/img/favicon.ico"><link rel="stylesheet" href="/docusaurus-theme-vanilla/assets/css/styles.e0663130.css">
<link rel="preload" href="/docusaurus-theme-vanilla/assets/js/runtime~main.afcb9b20.js" as="script">
<link rel="preload" href="/docusaurus-theme-vanilla/assets/js/main.77df87c4.js" as="script">
</head>
<body>
<div id="__docusaurus">
<div class="docMain_nU3O"><div class="docSidebar_u_TH">hello</div><main class="docContent_Plr0"><h1>ðŸ“¦ plugin-pwa</h1><h1>ðŸ“¦ plugin-pwa</h1><p>Docusaurus Plugin to add PWA support using <a href="https://developers.google.com/web/tools/workbox">Workbox</a>. This plugin generates a <a href="https://developers.google.com/web/fundamentals/primers/service-workers">Service Worker</a> in production build only, and allows you to create fully PWA-compliant documentation site with offline and installation support.</p><h2 id="installation"><a href="#installation">Installation</a></h2><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabs__item--active">npm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item">Yarn</li></ul><div class="margin-top--md"><div role="tabpanel"><pre><code class="language-bash">npm install --save @docusaurus/plugin-pwa
</code></pre></div><div role="tabpanel" hidden=""><pre><code class="language-bash">yarn add @docusaurus/plugin-pwa
</code></pre></div></div></div><h2 id="configuration"><a href="#configuration">Configuration</a></h2><p>Create a <a href="https://web.dev/add-manifest/">PWA manifest</a> at <code>./static/manifest.json</code>.</p><p>Modify <code>docusaurus.config.js</code> with a minimal PWA config, like:</p><pre><code class="language-js" metastring="title=&quot;docusaurus.config.js&quot;" title="&quot;docusaurus.config.js&quot;">module.exports = {
  plugins: [
    [
      &quot;@docusaurus/plugin-pwa&quot;,
      {
        debug: true,
        offlineModeActivationStrategies: [
          &quot;appInstalled&quot;,
          &quot;standalone&quot;,
          &quot;queryString&quot;,
        ],
        pwaHead: [
          {
            tagName: &quot;link&quot;,
            rel: &quot;icon&quot;,
            href: &quot;/img/docusaurus.png&quot;,
          },
          {
            tagName: &quot;link&quot;,
            rel: &quot;manifest&quot;,
            href: &quot;/manifest.json&quot;, // your PWA manifest
          },
          {
            tagName: &quot;meta&quot;,
            name: &quot;theme-color&quot;,
            content: &quot;rgb(37, 194, 160)&quot;,
          },
        ],
      },
    ],
  ],
};
</code></pre><h2 id="progressive-web-app"><a href="#progressive-web-app">Progressive Web App</a></h2><p>Having a service worker installed is not enough to make your application a PWA. You&#x27;ll need to at least include a <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">Web App Manifest</a> and have the correct tags in <code>&lt;head&gt;</code> (<a href="#pwahead">Options &gt; pwaHead</a>).</p><p>After deployment, you can use <a href="https://developers.google.com/web/tools/lighthouse">Lighthouse</a> to run an audit on your site.</p><p>For a more exhaustive list of what it takes for your site to be a PWA, refer to the <a href="https://developers.google.com/web/progressive-web-apps/checklist">PWA Checklist</a></p><h2 id="app-installation-support"><a href="#app-installation-support">App installation support</a></h2><p>If your browser supports it, you should be able to install a Docusaurus site as an app.</p><p><img alt="pwa_install.gif" src="/docusaurus-theme-vanilla/assets/images/pwa_install-169e763a3e99bb01e41be11c1a4af51f.gif" width="640" height="505"></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>App installation requires the https protocol and a valid manifest.</p></div></div><h2 id="offline-mode-precaching"><a href="#offline-mode-precaching">Offline mode (precaching)</a></h2><p>We enable users to browse a Docusaurus site offline, by using service-worker precaching.</p><blockquote><h3 id="what-is-precaching"><a href="#what-is-precaching"><a href="https://developers.google.com/web/tools/workbox/modules/workbox-precaching">What is Precaching?</a></a></h3><p>One feature of service workers is the ability to save a set of files to the cache when the service worker is installing. This is often referred to as &quot;precaching&quot;, since you are caching content ahead of the service worker being used.</p><p>The main reason for doing this is that it gives developers control over the cache, meaning they can determine when and how long a file is cached as well as serve it to the browser without going to the network, meaning it can be used to create web apps that work offline.</p><p>Workbox takes a lot of the heavy lifting out of precaching by simplifying the API and ensuring assets are downloaded efficiently.</p></blockquote><p>By default, offline mode is enabled when the site is installed as an app. See the <code>offlineModeActivationStrategies</code> option for details.</p><p>After the site has been precached, the service worker will serve cached responses for later visits. When a new build is deployed along with a new service worker, the new one will begin installing and eventually move to a waiting state. During this waiting state, a reload popup will show and ask the user to reload the page for new content. Until the user either clears the application cache or clicks the <code>reload</code> button on the popup, the service worker will continue serving the old content.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Offline mode / precaching requires downloading all the static assets of the site ahead of time, and can consume unnecessary bandwidth. It may not be a good idea to activate it for all kind of sites.</p></div></div><h2 id="options"><a href="#options">Options</a></h2><h3 id="debug"><a href="#debug"><code>debug</code></a></h3><ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>Turn debug mode on:</p><ul><li>Workbox logs</li><li>Additional Docusaurus logs</li><li>Unoptimized SW file output</li><li>Source maps</li></ul><h3 id="offlinemodeactivationstrategies"><a href="#offlinemodeactivationstrategies"><code>offlineModeActivationStrategies</code></a></h3><ul><li>Type: <code>(&#x27;appInstalled&#x27; | &#x27;mobile&#x27; | &#x27;saveData&#x27;| &#x27;queryString&#x27; | &#x27;always&#x27;)[]</code></li><li>Default: <code>[&#x27;appInstalled&#x27;, &#x27;queryString&#x27;, &#x27;standalone&#x27;]</code></li></ul><p>Strategies used to turn the offline mode on:</p><ul><li><code>appInstalled</code>: activates for users having installed the site as an app (not 100% reliable)</li><li><code>standalone</code>: activates for users running the app as standalone (often the case once a PWA is installed)</li><li><code>queryString</code>: activates if queryString contains <code>offlineMode=true</code> (convenient for PWA debugging)</li><li><code>mobile</code>: activates for mobile users (width &lt;= 940px)</li><li><code>saveData</code>: activates for users with <code>navigator.connection.saveData === true</code></li><li><code>always</code>: activates for all users</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Use this carefully: some users may not like to be forced to use the offline mode.</p></div></div><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>It is not possible to detect if an as a PWA in a very reliable way.</p><p>The <code>appinstalled</code> event has been <a href="https://github.com/w3c/manifest/pull/836">removed from the specification</a>, and the <a href="https://web.dev/get-installed-related-apps/"><code>navigator.getInstalledRelatedApps()</code></a> API is only supported in recent Chrome versions and require <code>related_applications</code> declared in the manifest.</p><p>The <a href="https://petelepage.com/blog/2019/07/is-my-pwa-installed/"><code>standalone</code> strategy</a> is a nice fallback to activate the offline mode (at least when running the installed app).</p></div></div><h3 id="injectmanifestconfig"><a href="#injectmanifestconfig"><code>injectManifestConfig</code></a></h3><p><a href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.injectManifest">Workbox options</a> to pass to <code>workbox.injectManifest()</code>. This gives you control over which assets will be precached, and be available offline.</p><ul><li>Type: <code>InjectManifestOptions</code></li><li>Default: <code>{}</code></li></ul><pre><code class="language-js" metastring="title=&quot;docusaurus.config.js&quot;" title="&quot;docusaurus.config.js&quot;">module.exports = {
  plugins: [
    [
      &quot;@docusaurus/plugin-pwa&quot;,
      {
        injectManifestConfig: {
          manifestTransforms: [
            //...
          ],
          modifyURLPrefix: {
            //...
          },
          // We already add regular static assets (html, images...) to be available offline
          // You can add more files according to your needs
          globPatterns: [&quot;**/*.{pdf,docx,xlsx}&quot;],
          // ...
        },
      },
    ],
  ],
};
</code></pre><h3 id="pwahead"><a href="#pwahead"><code>pwaHead</code></a></h3><ul><li>Type: <code>({ tagName: string; [attributeName: string]: string })[]</code></li><li>Default: <code>[]</code></li></ul><p>Array of objects containing <code>tagName</code> and key-value pairs for attributes to inject into the <code>&lt;head&gt;</code> tag. Technically you can inject any head tag through this, but it&#x27;s ideally used for tags to make your site PWA compliant. Here&#x27;s a list of tag to make your app fully compliant:</p><pre><code class="language-js">module.exports = {
  plugins: [
    [
      &quot;@docusaurus/plugin-pwa&quot;,
      {
        pwaHead: [
          {
            tagName: &quot;link&quot;,
            rel: &quot;icon&quot;,
            href: &quot;/img/docusaurus.png&quot;,
          },
          {
            tagName: &quot;link&quot;,
            rel: &quot;manifest&quot;,
            href: &quot;/manifest.json&quot;,
          },
          {
            tagName: &quot;meta&quot;,
            name: &quot;theme-color&quot;,
            content: &quot;rgb(37, 194, 160)&quot;,
          },
          {
            tagName: &quot;meta&quot;,
            name: &quot;apple-mobile-web-app-capable&quot;,
            content: &quot;yes&quot;,
          },
          {
            tagName: &quot;meta&quot;,
            name: &quot;apple-mobile-web-app-status-bar-style&quot;,
            content: &quot;#000&quot;,
          },
          {
            tagName: &quot;link&quot;,
            rel: &quot;apple-touch-icon&quot;,
            href: &quot;/img/docusaurus.png&quot;,
          },
          {
            tagName: &quot;link&quot;,
            rel: &quot;mask-icon&quot;,
            href: &quot;/img/docusaurus.svg&quot;,
            color: &quot;rgb(37, 194, 160)&quot;,
          },
          {
            tagName: &quot;meta&quot;,
            name: &quot;msapplication-TileImage&quot;,
            content: &quot;/img/docusaurus.png&quot;,
          },
          {
            tagName: &quot;meta&quot;,
            name: &quot;msapplication-TileColor&quot;,
            content: &quot;#000&quot;,
          },
        ],
      },
    ],
  ],
};
</code></pre><h3 id="swcustom"><a href="#swcustom"><code>swCustom</code></a></h3><ul><li>Type: <code>string | undefined</code></li><li>Default: <code>undefined</code></li></ul><p>Useful for additional Workbox rules. You can do whatever a service worker can do here, and use the full power of workbox libraries. The code is transpiled, so you can use modern ES6+ syntax here.</p><p>For example, to cache files from external routes:</p><pre><code class="language-js">import { registerRoute } from &quot;workbox-routing&quot;;
import { StaleWhileRevalidate } from &quot;workbox-strategies&quot;;

// default fn export receiving some useful params
export default function swCustom(params) {
  const {
    debug, // :boolean
    offlineMode, // :boolean
  } = params;

  // Cache responses from external resources
  registerRoute((context) =&gt; {
    return [
      /graph\.facebook\.com\/.*\/picture/,
      /netlify\.com\/img/,
      /avatars1\.githubusercontent/,
    ].some((regex) =&gt; context.url.href.match(regex));
  }, new StaleWhileRevalidate());
}
</code></pre><p>The module should have a <code>default</code> function export, and receives some params.</p><h3 id="swregister"><a href="#swregister"><code>swRegister</code></a></h3><ul><li>Type: <code>string | false</code></li><li>Default: <code>&#x27;docusaurus-plugin-pwa/src/registerSW.js&#x27;</code></li></ul><p>Adds an entry before the Docusaurus app so that registration can happen before the app runs. The default <code>registerSW.js</code> file is enough for simple registration.</p><p>Passing <code>false</code> will disable registration entirely.</p><h2 id="manifest-example"><a href="#manifest-example">Manifest example</a></h2><p>The Docusaurus site manifest can serve as an inspiration:</p><pre class="language-json"><code>{
  &quot;name&quot;: &quot;Docusaurus v2&quot;,
  &quot;short_name&quot;: &quot;Docusaurus&quot;,
  &quot;theme_color&quot;: &quot;#2196f3&quot;,
  &quot;background_color&quot;: &quot;#424242&quot;,
  &quot;display&quot;: &quot;standalone&quot;,
  &quot;scope&quot;: &quot;./&quot;,
  &quot;start_url&quot;: &quot;./index.html&quot;,
  &quot;related_applications&quot;: [
    {
      &quot;platform&quot;: &quot;webapp&quot;,
      &quot;url&quot;: &quot;https://docusaurus.io/manifest.json&quot;
    }
  ],
  &quot;icons&quot;: [
    {
      &quot;src&quot;: &quot;img/icons/icon-72x72.png&quot;,
      &quot;sizes&quot;: &quot;72x72&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-96x96.png&quot;,
      &quot;sizes&quot;: &quot;96x96&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-128x128.png&quot;,
      &quot;sizes&quot;: &quot;128x128&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-144x144.png&quot;,
      &quot;sizes&quot;: &quot;144x144&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-152x152.png&quot;,
      &quot;sizes&quot;: &quot;152x152&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-192x192.png&quot;,
      &quot;sizes&quot;: &quot;192x192&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-384x384.png&quot;,
      &quot;sizes&quot;: &quot;384x384&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    },
    {
      &quot;src&quot;: &quot;img/icons/icon-512x512.png&quot;,
      &quot;sizes&quot;: &quot;512x512&quot;,
      &quot;type&quot;: &quot;image/png&quot;
    }
  ]
}</code></pre><h2 id="customizing-reload-popup"><a href="#customizing-reload-popup">Customizing reload popup</a></h2><p>The <code>@theme/PwaReloadPopup</code> component is rendered when a new service worker is waiting to be installed, and we suggest a reload to the user. You can <a href="/docusaurus-theme-vanilla/docs/next/swizzling">swizzle</a> this component and implement your own UI. It will receive an <code>onReload</code> callback as props, which should be called when the <code>reload</code> button is clicked. This will tell the service worker to install the waiting service worker and reload the page.</p><p>The default theme includes an implementation for the reload popup and uses <a href="https://infima.dev/docs/components/alert">Infima Alerts</a>.</p><p><img alt="pwa_reload.gif" src="/docusaurus-theme-vanilla/assets/images/pwa_reload-6af462b35d0ed752c44ad0899559bedf.gif" width="1000" height="502"></p><p>Your component can render <code>null</code>, but this is not recommended: users won&#x27;t have a way to get up-to-date content.</p><nav class="pagination_m5Fq"><span class="prevLink_bZi_"><a href="/docusaurus-theme-vanilla/docs/next/api/plugins/@docusaurus/plugin-ideal-image">Previous doc: <!-- -->ðŸ“¦ plugin-ideal-image</a></span><span class="nextLink_cubj"><a href="/docusaurus-theme-vanilla/docs/next/api/plugins/@docusaurus/plugin-sitemap">Next doc: <!-- -->ðŸ“¦ plugin-sitemap</a></span></nav></main><aside class="docSidebar_pDtY"><nav class="docSidebarContent_nqVt"><ol><li><a href="#installation">Installation</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#progressive-web-app">Progressive Web App</a></li><li><a href="#app-installation-support">App installation support</a></li><li><a href="#offline-mode-precaching">Offline mode (precaching)</a></li><li><a href="#options">Options</a><ol><li><a href="#debug"><code>debug</code></a></li><li><a href="#offlinemodeactivationstrategies"><code>offlineModeActivationStrategies</code></a></li><li><a href="#injectmanifestconfig"><code>injectManifestConfig</code></a></li><li><a href="#pwahead"><code>pwaHead</code></a></li><li><a href="#swcustom"><code>swCustom</code></a></li><li><a href="#swregister"><code>swRegister</code></a></li></ol></li><li><a href="#manifest-example">Manifest example</a></li><li><a href="#customizing-reload-popup">Customizing reload popup</a></li></ol></nav></aside></div></div>
<script src="/docusaurus-theme-vanilla/assets/js/runtime~main.afcb9b20.js"></script>
<script src="/docusaurus-theme-vanilla/assets/js/main.77df87c4.js"></script>
</body>
</html>